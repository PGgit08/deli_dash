<!DOCTYPE html>
<html>
  <head>
      <title>Setup Search</title>
  </head>
  <body>
  <style>
		#setup_search_div{
			position: fixed;
			right: 45%;
			bottom: 50%;
			width: auto;
		}

		body{
			background-color: black;
		}

		#search_header{
			color: white;
		}

		#submit_setup_search{
			position:fixed;
			right: 50%;
			bottom: 40%;
		}
		
		#radius{
			position: fixed;
			right: 49.7%;
			bottom: 47%;
		}
		
		#radius_message{
			position: fixed;
			color: blue;
			left: 43%;
			bottom: 48%
		}
  
	</style>
  <div id="setup_search_div">
		<h1 id="search_header">Setup Search</h1>
		<h3 id="radius_message">Enter Your Radius</h3>
		<select id="radius">
			<option value="1">1 mile</option>
			<option value="2">2 miles</option>
			<option value="3">3 miles</option>
			<option value="4">4 miles</option>
		</select>	
		<br>
		<input id="submit_setup_search" type="button" value="Submit" onclick="getLocation()"/>
  </div>

  <script>
	function getLocation() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(redirect);
		} 
		else {
			document.write("Geolocation is not supported by this browser.");
		}
	}
	
	function redirect(position){
		var lat = position.coords.latitude;
		var lng = position.coords.longitude;
		
		var loc_data = {"lat": lat, "lng": lng};
		var radius_dropdown = document.getElementById("radius");
		var chosen_radius = radius_dropdown.options[radius_dropdown.selectedIndex].value;
		// redirect
		window.location = "/nearby_search/map?user_loc=" + JSON.stringify(loc_data) + "&rad=" + chosen_radius;
	}

  </script>
  </body>
</html>